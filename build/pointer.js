!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"),require("react-dom"));else if("function"==typeof define&&define.amd)define(["react","react-dom"],t);else{var n="object"==typeof exports?t(require("react"),require("react-dom")):t(e.react,e["react-dom"]);for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(window,function(e,t){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,a,c,p;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(s(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(r(n))for(a=Array.prototype.slice.call(arguments,1),o=(p=n.slice()).length,c=0;c<o;c++)p[c].apply(this,a);return!0},n.prototype.addListener=function(e,t){var o;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var n,s,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,s=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(a=o;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){s=a;break}if(s<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),s=n(1),o=n(2),a=n.n(o);function c(e,t){var n=e[Object.keys(e)[0]],i=n.clientX,r=n.clientY;return 180*Math.atan2(r-t.clientY,i-t.clientX)/Math.PI}function p(e){var t=e.length,n=0,i=0;for(var r in e){var s=e[r];n+=s.clientX,i+=s.clientY}return{clientX:n/t,clientY:i/t}}function l(e,t){var n=e.length,i=0,r=t.clientX,s=t.clientY;for(var o in e){var a=e[o];i+=h(a.clientX,a.clientY,r,s)}return i/n}function h(e,t,n,i){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var d=function(){},v={pressTimer:500,pressDistance:20,tapTimer:150,tapDistance:20,doubleTapTimer:300,doubleTapDistance:20,panStartDistance:20,rotatePositionThreshold:8,rotateDistanceThreshold:300,scalePositionThreshold:.07,scaleDistanceThreshold:.15,thresholdResetTimer:1e3,thresholdResetCoeff:0},m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pointersState={activePointers:{},pointersLength:0,lastTap:{},session:{startX:0,startY:0,startAngle:0,startRadius:0,startTime:0},currentCenter:0,currentAngle:0,currentTimeStamp:0,currentRadius:0,rotationDistance:0,scaleDistance:0},Object.defineProperty(n.pointersState.activePointers,"length",{value:0,enumerable:!1,writable:!0,configurable:!0}),n.ee=new a.a,n.addPointerToTracking=n.addPointerToTracking.bind(n),n.removePointerFromTracking=n.removePointerFromTracking.bind(n),n.recalc=n.recalc.bind(n),n.clearPointers=n.clearPointers.bind(n),n.updateSession=function(e){var t=this,n=this.pointersState,i=(n.session,n.activePointers),r=i.length;if(clearInterval(this.thresholdResetIntervalID),r>1){var s=p(i),o=c(i,s),a=l(i,s);return this.pointersState.session={startX:s.clientX,startY:s.clientY,startAngle:o,startRadius:a,startTime:e},this.pointersState.currentCenter=s,this.pointersState.currentAngle=o,this.pointersState.currentRadius=a,this.pointersState.rotationDistance=0,this.pointersState.rotationPosition=0,this.pointersState.scaleDistance=0,this.pointersState.scalePosition=0,void(this.thresholdResetIntervalID=setInterval(function(){Math.abs(t.pointersState.rotationPosition)<t.rotateDistanceThreshold&&(t.rotating=!1),Math.abs(t.pointersState.scalePosition)<t.scaleDistanceThreshold&&(t.scaling=!1),t.pointersState.rotationPosition*=t.thresholdResetCoeff,t.pointersState.scalePosition*=t.thresholdResetCoeff},this.thresholdResetTimer))}if(1!==r);else{var h=i[Object.keys(i)[0]],u=h.clientX,d=h.clientY;this.pointersState.session={startX:u,startY:d,startTime:e}}}.bind(n),n.handlePan=function(e){var t=this.pointersState,n=t.activePointers,i=t.session,r=e.target,s=n[Object.keys(n)[0]];if(s.panning){var o=s.clientX,a=s.clientY,c=s.deltaX,p=s.deltaY,l=s.timeStamp,h=(s.startTime,s.distance),u=s.pointerId,d=s.pointerType;this.ee.emit("pan",{session:i,timeStamp:l,clientX:o,clientY:a,deltaX:c,deltaY:p,distance:h,pointerId:u,pointerType:d,target:r,srcEvent:e,type:"pan"})}}.bind(n),n.handlePinch=function(e,t){var n=this.pointersState,i=n.activePointers,r=n.session,s=n.currentCenter,o=n.currentAngle,a=n.currentRadius,u=(n.rotationDistance,n.scaleDistance,e.target),d=(e.pointerId,e.pointerType,r.startX),v=r.startY,m=r.startRadius,f=r.startAngle,y=(r.startTime,p(i)),g=l(i,y),b=c(i,y),T=y.clientX-s.clientX,S=y.clientY-s.clientY,P=b-o,_=(g-a)/m,E=h(d,v,y.clientX,y.clientY),X=b-f,Y=g/m;this.pointersState.currentCenter=y,this.pointersState.currentAngle=b,this.pointersState.currentRadius=g,this.pointersState.rotationPosition+=P,this.pointersState.rotationDistance+=Math.abs(P),this.pointersState.scalePosition+=_,this.pointersState.scaleDistance+=Math.abs(_),this.ee.emit("pan",{pointers:Object.assign({},i),session:r,target:u,center:y,deltaX:T,deltaY:S,distance:E,srcEvent:e,type:"pinch"}),!this.scaling&&Math.abs(this.pointersState.scalePosition)>this.scalePositionThreshold&&(this.pointersState.scalePosition=0,this.scaling=!0),this.scaling&&this.ee.emit("pinch",{pointers:Object.assign({},i),session:r,target:u,center:y,deltaX:T,deltaY:S,distance:E,deltaScale:_,scale:Y,srcEvent:e,type:"pinch"}),!this.rotating&&Math.abs(this.pointersState.rotationPosition)>this.rotatePositionThreshold&&(this.pointersState.rotationPosition=0,this.rotating=!0),this.rotating&&this.ee.emit("rotate",{pointers:Object.assign({},i),session:r,target:u,center:y,rotation:X,deltaRotation:P,srcEvent:e,type:"rotate"})}.bind(n),n.handlePress=function(e){var t=this.pointersState,n=t.activePointers,i=t.session,r=e.timeStamp,s=e.pointerId,o=e.pointerType,a=e.target,c=n[s];c&&c.distance<this.pressDistance&&(c.pressed=!0,this.ee.emit("pressdown",{session:i,target:a,timeStamp:r,pointerId:s,pointerType:o,srcEvent:e,type:"pressdown"}))}.bind(n),n.handleDoubleTap=function(e){var t=this.pointersState.lastTap,n=e.clientX,i=e.clientY,r=e.timeStamp,s=e.pointerId,o=e.pointerType,a=e.target,c=h(n,i,t.clientX,t.clientY),p=r-t.timeStamp;c<this.doubleTapDistance&&p<this.doubleTapTimer&&this.ee.emit("doubletap",{target:a,clientX:n,clientY:i,timeStamp:r,pointerId:s,pointerType:o,type:"doubletap",srcEvent:e}),this.ee.removeListener("tap",this.handleDoubleTap)}.bind(n),n.handleRemove=function(e){var t=e.pointerId,n=e.pointerType,i=e.clientX,r=e.clientY,s=e.target,o=e.timeStamp,a=e.srcEvent,c=this.pointersState,p=c.activePointers,l=c.session,u=p[t];if(u){var d=u.startX,v=u.startY,m=o-u.timeStamp,f=h(d,v,i,r);if(this.ee.emit("pressup",{session:l,target:s,clientX:i,clientY:r,timeStamp:o,pointerId:t,pointerType:n,distance:f,srcEvent:a,type:"pressup"}),m<this.tapTimer&&f<this.tapDistance){var y={session:l,target:s,timeStamp:o,pointerId:t,pointerType:n,clientX:i,clientY:r,distance:f,srcEvent:a,type:"tap"};this.ee.emit("tap",y),a instanceof TouchEvent&&s.click(),this.ee.on("tap",this.handleDoubleTap),this.pointersState.lastTap=y}u.panning&&this.ee.emit("panend",{session:l,target:s,distance:f,pointerId:t,pointerType:n,clientX:i,clientY:r,timeStamp:o,srcEvent:a,type:"panend"}),delete p[t],p.length-=1}}.bind(n),n.handleMove=function(e){var t=e.pointerId,n=e.pointerType,i=e.clientX,r=e.clientY,s=e.srcEvent,o=e.timeStamp,a=e.target,c=this.pointersState,p=c.activePointers,l=c.session,u=p[t];if(u){u.deltaX=i-u.clientX,u.deltaY=r-u.clientY,u.clientX=i,u.clientY=r,u.timeStamp=o,u.distance=h(u.startX,u.startY,i,r);var d=o-l.startTime;return!u.panning&&d>this.tapTimer&&u.distance>this.tapDistance&&(u.panning=!0,this.ee.emit("panstart",{timeStamp:o,session:l,target:a,pointerId:t,pointerType:n,clientX:i,clientY:r,srcEvent:s,type:"panstart"})),!0}}.bind(n),n.handleAdd=function(e){var t=e.target,n=e.clientX,i=e.clientY,r=e.timeStamp,s=e.pointerId,o=e.pointerType,a=e.srcEvent,c=this.pointersState,p=c.activePointers,l=c.session;p[s]={clientX:n,clientY:i,timeStamp:r,startX:n,startY:i,startTime:r,distance:0,pointerId:s,pointerType:o,panning:!1,target:t},this.ee.emit("pressdown",{timeStamp:r,session:l,target:t,pointerId:s,pointerType:o,clientX:n,clientY:i,srcEvent:a,type:"pressdown"}),p.length+=1}.bind(n),n.pressTimer=500,n.pressDistance=20,n.tapTimer=150,n.tapDistance=20,n.doubleTapTimer=150,n.doubleTapDistance=20,n.pinchRotateThreshold=2.5,n.thresholdResetTimer=300,n.thresholdResetCoeff=.5,Object.assign(n,v),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),u(t,[{key:"componentDidMount",value:function(){this.container=Object(s.findDOMNode)(this),this.container.addEventListener("touchmove",this.recalc),this.container.addEventListener("touchstart",this.addPointerToTracking),this.container.addEventListener("touchend",this.removePointerFromTracking),this.container.addEventListener("mousedown",this.addPointerToTracking),document.body.addEventListener("mousemove",this.recalc),document.body.addEventListener("mouseup",this.removePointerFromTracking),document.body.addEventListener("mouseleave",this.clearPointers),document.body.addEventListener("touchcancel",this.clearPointers),this.ee.on("tap",this.props.onTap||d),this.ee.on("doubletap",this.props.onDoubleTap||d),this.ee.on("pan",this.props.onPan||d),this.ee.on("panstart",this.props.onPanStart||d),this.ee.on("panend",this.props.onPanEnd||d),this.ee.on("pinch",this.props.onPinch||d),this.ee.on("rotate",this.props.onRotate||d),this.ee.on("pressdown",this.props.onPressDown||d),this.ee.on("pressup",this.props.onPressUp||d)}},{key:"componentWillUnmount",value:function(){this.container.removeEventListener("touchstart",this.addPointerToTracking),this.container.removeEventListener("touchend",this.removePointerFromTracking),this.container.removeEventListener("touchmove",this.recalc),this.container.removeEventListener("mousedown",this.addPointerToTracking),document.body.removeEventListener("mouseup",this.removePointerFromTracking),document.body.removeEventListener("mousemove",this.recalc),clearInterval(this.thresholdResetIntervalID)}},{key:"recalc",value:function(e){var t=this,n=this.pointersState.activePointers;if(e instanceof MouseEvent){var i=e.clientX,r=e.clientY,s=e.timeStamp,o=e.target;n[0]&&(this.handleMove({clientX:i,clientY:r,target:o,timeStamp:s,pointerId:0,pointerType:"mouse",srcEvent:e}),this.handlePan(e))}else{var a=e.changedTouches,c=e.timeStamp;e.preventDefault();var p=n.length,l=0;if(Array.prototype.map.call(a,function(n){var i=n.clientX,r=n.clientY,s=n.identifier,o=n.target;l+=t.handleMove({clientX:i,clientY:r,timeStamp:c,target:o,pointerId:s,pointerType:"touch",srcEvent:e})}),l>0){if(1===p)return this.handlePan(e);if(p>1)return this.handlePinch(e)}}}},{key:"addPointerToTracking",value:function(e){var t=this,n=this.pointersState,i=n.activePointers;n.session;if(e instanceof MouseEvent){var r=e.target,s=e.clientX,o=e.clientY,a=e.timeStamp;return this.handleAdd({target:r,clientX:s,clientY:o,timeStamp:a,pointerId:0,pointerType:"mouse",srcEvent:e}),void this.updateSession(a)}var c=e.changedTouches,p=e.timeStamp;Array.prototype.map.call(c,function(n){var r=n.target,s=n.identifier,o=n.clientX,a=n.clientY;i[s];t.handleAdd({target:r,clientX:o,clientY:a,timeStamp:p,pointerId:s,pointerType:"touch",srcEvent:e})}),this.updateSession(p)}},{key:"removePointerFromTracking",value:function(e){var t=this,n=this.pointersState;n.activePointers,n.session;if(e instanceof MouseEvent){var i=e.target,r=e.clientX,s=e.clientY,o=e.timeStamp;return this.handleRemove({target:i,clientX:r,clientY:s,pointerId:0,pointerType:"mouse",timeStamp:o,srcEvent:e}),void this.updateSession(o)}var a=e.changedTouches,c=e.timeStamp;e.preventDefault(),Array.prototype.map.call(a,function(n){var i=n.target,r=n.identifier,s=n.clientX,o=n.clientY;t.handleRemove({target:i,timeStamp:c,clientX:s,clientY:o,pointerId:r,pointerType:"touch",srcEvent:e})}),this.updateSession(c)}},{key:"clearPointers",value:function(){this.pointersState.activePointers={},Object.defineProperty(this.pointersState.activePointers,"length",{value:0,enumerable:!1,writable:!0,configurable:!0})}},{key:"render",value:function(){var e=this.props.children;return r.a.createElement(i.Fragment,null,e)}}]),t}();n.d(t,"default",function(){return m})}])});